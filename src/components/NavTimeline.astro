
---
const items = [
  { href: '/', label: 'Home' },
  { href: '/portfolio', label: 'Portfolio' },
  { href: '/blog', label: 'Blog' },
  { href: '/about', label: 'About' },
  { href: '/contact', label: 'Contact' },
];

// Get current path for active state and normalize it
const currentPath = Astro.url.pathname.replace(/\/$/, ''); // Remove trailing slash

// Helper function to check if a path is active
function isPathActive(href: string, currentPath: string): boolean {
  if (href === '/') {
    return currentPath === '' || currentPath === '/';
  }
  return currentPath === href || currentPath.startsWith(href + '/');
}
---
<nav class="w-full flex flex-col items-center gap-4 py-8 pt-10">
  <a href="/" class="block group">
    <img 
      src="/whit-site-logo.svg" 
      alt="Whit Cooper logo" 
      class="h-16 transition-transform duration-300 group-hover:scale-110" 
    />
  </a>
  
  <div class="relative flex items-center gap-8">
    {items.map(({href, label}) => {
      const isActive = isPathActive(href, currentPath);
      return (
        <a 
          href={href} 
          class="group flex flex-col items-center relative"
          aria-current={isActive ? 'page' : undefined}
        >
          <span class={`
            w-4 h-4 md:w-3 md:h-3 rounded-full transition-all duration-300 ease-out
            ${isActive 
              ? 'bg-white scale-125 shadow-lg shadow-white/30' 
              : 'bg-white/70 group-hover:bg-white group-hover:scale-110'
            }
          `}></span>
          <span class={`
            mt-3 text-xs font-medium transition-all duration-300
            ${isActive 
              ? 'opacity-100 text-fg' 
              : 'opacity-60 group-hover:opacity-100 group-hover:text-fg'
            }
          `}>
            {label}
          </span>
          
          {/* Active indicator line */}
          {isActive && (
            <div class="absolute -bottom-1 left-1/2 w-1 h-1 bg-white rounded-full transform -translate-x-1/2 animate-pulse"></div>
          )}
        </a>
      );
    })}
    
    {/* Timeline line with improved styling */}
    <div class="absolute -z-10 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent top-2 md:top-1.5"></div>
  </div>
</nav>
